name: CI Workflow
on:
    pull_request:
        branches: [ main ]

jobs:
    lint:
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v2
            -   uses: pnpm/action-setup@v2
                with:
                    version: 6.32.9
            -   uses: actions/setup-node@v3
                with:
                    node-version: 16
                    cache: 'pnpm'
            -   name: Install Dependencies
                run: pnpm install --frozen-lockfile

            -   name: Lint
                run: pnpm lint

    format:
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v2
            -   uses: actions/setup-node@v3
                with:
                    node-version: 16
                    cache: 'pnpm'
            -   name: Install Dependencies
                run: pnpm install --frozen-lockfile

            -   name: Format
                run: pnpm format

    build:
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v2
            -   uses: actions/setup-node@v3
                with:
                    node-version: 16
                    cache: 'pnpm'
            -   name: Install Dependencies
                run: pnpm install --frozen-lockfile

            -   name: Build
                run: pnpm build